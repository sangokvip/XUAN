# 占卜师展示平台

一个专业的占卜师展示和预约平台，采用PHP+MySQL开发，具有完整的用户管理、占卜师管理和后台管理功能。

## 功能特性

### 用户功能
- 用户注册和登录
- 浏览占卜师列表
- 搜索和筛选占卜师
- 查看占卜师详细信息
- 查看占卜师联系方式（需登录）

### 占卜师功能
- 专用注册链接注册（24小时有效期）
- 个人资料管理
- 上传个人照片和价格列表
- 查看联系方式查看记录
- 个人数据统计

### 管理员功能
- 生成占卜师注册链接
- 管理占卜师（激活/禁用、推荐设置）
- 管理用户
- 系统设置
- 数据统计和分析

### 技术特性
- 响应式设计，支持移动端
- 黑+金+白主色调设计
- 安全的文件上传
- SQL注入防护
- 登录尝试限制
- 缓存系统优化性能
- 错误日志记录
- CSRF保护

## 系统要求

- PHP 7.4 或更高版本
- MySQL 5.7 或更高版本
- Apache/Nginx Web服务器
- PHP扩展：PDO、PDO_MySQL、GD、Fileinfo

## 安装步骤

### 1. 下载代码
```bash
git clone [repository-url]
cd tarot-platform
```

### 2. 设置文件权限
```bash
chmod 755 uploads/
chmod 755 cache/
chmod 755 logs/
chmod 755 config/
```

### 3. 运行安装向导
访问 `http://your-domain.com/install.php` 并按照向导完成安装：

1. **环境检查** - 检查PHP版本和必需扩展
2. **数据库配置** - 设置数据库连接信息
3. **管理员账户** - 创建管理员账户
4. **完成安装** - 删除安装文件

### 4. 安全设置
安装完成后，请：
- 删除 `install.php` 文件
- 设置适当的文件权限
- 配置HTTPS（生产环境）
- 修改 `config/config.php` 中的环境设置

## 目录结构

```
tarot-platform/
├── admin/                  # 管理员后台
├── assets/                 # 静态资源
│   ├── css/               # 样式文件
│   ├── js/                # JavaScript文件
│   └── images/            # 图片资源
├── auth/                   # 认证相关页面
├── cache/                  # 缓存目录
├── config/                 # 配置文件
├── database/              # 数据库文件
├── includes/              # 公共包含文件
├── logs/                  # 日志目录
├── reader/                # 占卜师后台
├── uploads/               # 上传文件目录
│   ├── photos/           # 个人照片
│   └── price_lists/      # 价格列表
├── index.php              # 首页
├── readers.php            # 占卜师列表
├── reader.php             # 占卜师详情
└── install.php            # 安装向导
```

## 配置说明

### 数据库配置
编辑 `config/database.php`：
```php
define('DB_HOST', 'localhost');
define('DB_NAME', 'tarot_platform');
define('DB_USER', 'your_username');
define('DB_PASS', 'your_password');
```

### 网站配置
编辑 `config/config.php`：
```php
define('SITE_NAME', '您的网站名称');
define('SITE_URL', 'https://your-domain.com');
define('SITE_EMAIL', 'admin@your-domain.com');
define('ENVIRONMENT', 'production'); // 生产环境
```

### 安全配置
- 修改默认管理员密码
- 设置强密码策略
- 配置HTTPS
- 定期备份数据库

## 使用说明

### 管理员操作
1. 访问 `/auth/admin_login.php` 登录管理后台
2. 在"注册链接"页面生成占卜师注册链接
3. 将链接发送给占卜师进行注册
4. 在"占卜师管理"中设置推荐占卜师

### 占卜师操作
1. 使用管理员提供的专用链接注册
2. 登录后完善个人资料
3. 上传个人照片和价格列表
4. 查看用户查看记录和统计数据

### 用户操作
1. 注册普通用户账户
2. 浏览和搜索占卜师
3. 查看占卜师详细信息
4. 获取占卜师联系方式

## 维护和优化

### 定期维护
- 清理过期的缓存文件
- 清理旧的日志文件
- 备份数据库
- 更新系统和PHP版本

### 性能优化
- 启用缓存系统
- 优化图片大小
- 使用CDN加速静态资源
- 配置数据库索引

### 安全维护
- 定期更新密码
- 监控错误日志
- 检查登录尝试记录
- 更新安全配置

## 故障排除

### 常见问题

**1. 文件上传失败**
- 检查 `uploads/` 目录权限
- 确认PHP上传限制设置
- 检查磁盘空间

**2. 数据库连接失败**
- 验证数据库配置信息
- 检查数据库服务状态
- 确认用户权限

**3. 页面显示错误**
- 检查 `logs/` 目录中的错误日志
- 验证文件权限设置
- 确认PHP版本兼容性

## 技术支持

如有问题，请：
1. 查看错误日志文件
2. 检查系统要求
3. 参考故障排除指南

## 许可证

本项目采用 MIT 许可证。

## 更新日志

### v1.0.0
- 初始版本发布
- 完整的用户、塔罗师、管理员功能
- 响应式设计
- 安全性和性能优化
