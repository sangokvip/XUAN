# 管理员一键添加占卜师功能说明

## 功能概述
管理员后台新增了一键添加占卜师功能，可以自动填写占卜师注册所需的所有信息，包括：

### 自动填写的字段

#### 必填字段
- **用户名** (username): 自动生成格式 `reader{时间戳}{随机数}`
- **邮箱** (email): 自动生成格式 `reader{时间戳}{随机数}@example.com`
- **密码** (password): 统一设置为 `787878`
- **占卜师昵称** (full_name): 从预设的美丽、神秘相关名字中随机选择
- **性别** (gender): 随机选择男/女
- **从业年数** (experience_years): 1-20年随机
- **国籍** (nationality): 80%概率中国，20%其他国家
- **擅长方向** (specialties): 从系统标签中随机选择2-5个
- **占卜类型** (divination_types): 从东玄/西玄类型中随机选择1-3个
- **主要身份标签** (primary_identity): 从选择的占卜类型中随机选择一个

#### 可选字段
- **手机号码** (phone): 自动生成中国手机号格式
- **头像** (photo): 根据性别使用默认头像 (tm.jpg/tf.jpg)
- **自定义专长** (custom_specialties): 30%概率生成1-2个自定义标签
- **个人简介** (description): 从预设的神秘学相关描述中随机选择
- **联系信息** (contact_info): 固定模板文本
- **微信号** (wechat): 70%概率生成
- **QQ号** (qq): 50%概率生成
- **小红书账号** (xiaohongshu): 40%概率生成
- **抖音账号** (douyin): 30%概率生成
- **其他联系方式** (other_contact): 20%概率生成
- **查看次数** (view_count): 0-1000随机
- **推荐状态** (is_featured): 25%概率成为推荐占卜师

## 使用方法

1. 登录管理员后台
2. 进入"占卜师管理"页面
3. 在"批量操作"区域找到"一键注册占卜师"功能
4. 设置要创建的占卜师数量（1-50个）
5. 点击"🎯 一键注册占卜师"按钮
6. 确认操作后系统将自动创建指定数量的占卜师

## 数据库更新

### 新增字段
为了支持完整的占卜师信息，数据库表新增了以下字段：
- `nationality` - 国籍代码
- `divination_types` - 占卜类型（JSON格式）
- `primary_identity` - 主要身份标签
- `identity_category` - 身份类别（western/eastern）

### 更新方法
1. **新安装系统**: 直接使用最新的安装文件，已包含所有字段
2. **现有系统**: 访问 `database_update_readers.php` 运行数据库更新脚本

## 文件修改列表

### 主要功能文件
- `admin/readers.php` - 添加一键注册功能和数据库更新提示

### 数据库相关文件
- `database_update_readers.php` - 新建，数据库字段更新脚本
- `install_complete.php` - 更新占卜师表结构
- `install.php` - 更新占卜师表结构
- `database/complete_schema.sql` - 更新表结构
- `database/install.sql` - 更新表结构

### 配置文件
- `includes/DivinationConfig.php` - 占卜类型和国籍配置（已存在）

## 特性说明

1. **智能字段检测**: 系统会自动检测数据库表中是否存在新字段，只插入存在的字段，避免错误
2. **随机数据生成**: 所有数据都是随机生成，确保测试数据的多样性
3. **符合业务逻辑**: 生成的数据符合占卜师注册的业务规则和验证要求
4. **美观的名字**: 占卜师名字包含玄学相关、优美中文名和英文名
5. **完整的联系方式**: 随机生成各种联系方式，模拟真实使用场景

## 注意事项

1. 所有自动生成的占卜师密码都是 `787878`
2. 使用的是系统默认头像，需要时可以手动更换
3. 建议在测试环境中使用此功能
4. 生成的邮箱地址使用 `@example.com` 域名，仅用于测试
